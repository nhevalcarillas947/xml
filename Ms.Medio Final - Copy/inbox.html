<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="inbox.css">
<title>Inbox - Barangay Paknaan Health Center</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #f3f4f6;
        color: #333;
    }
    .header {
        background: #2c3e50;
        padding: 20px;
        color: white;
        text-align: center;
    }
    .container {
        width: 90%;
        max-width: 900px;
        margin: 30px auto;
    }
    .title {
        font-size: 28px;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 10px;
    }
    .message-card {
        background: white;
        border-radius: 10px;
        padding: 15px;
        margin-bottom: 15px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        cursor: pointer;
        transition: 0.2s;
    }
    .message-card:hover {
        background: #f0f8ff;
    }
    .msg-header {
        display: flex;
        justify-content: space-between;
        font-weight: bold;
    }
    .msg-preview {
        margin-top: 8px;
        color: #555;
    }
    .timestamp {
        font-size: 12px;
        color: #777;
    }
    .msg-details {
        margin-top: 10px;
        padding: 10px;
        background: #eef6ff;
        border-radius: 8px;
        display: none;
        font-size: 14px;
    }
    .back-btn {
        margin-top: 20px;
        display: inline-block;
        padding: 10px 15px;
        background: #2c3e50;
        color: white;
        border-radius: 6px;
        text-decoration: none;
    }
    .back-btn:hover {
        background: #1b2733;
    }
</style>
</head>

<body>
<div class="header">
    <h1><i class="fas fa-inbox"></i> Inbox Messages</h1>
</div>

<div class="container">
    <h2 class="title"><i class="fas fa-envelope-open-text"></i> Your Messages</h2>

    <!-- Dynamic Messages Container -->
    <div id="messageContainer"></div>

    <a class="back-btn" href="User.html"><i class="fas fa-arrow-left"></i> Back to Home</a>
</div>

<script>
window.onload = function () {
    const container = document.getElementById("messageContainer");

    // Load approved schedules from localStorage
    const approved = JSON.parse(localStorage.getItem("approvedPatients")) || [];

    if (approved.length === 0) {
        container.innerHTML = `<p>No messages yet.</p>`;
        return;
    }

    approved.forEach((appt, index) => {
        // Create message card element
        const card = document.createElement('div');
        card.className = 'message-card';

        card.innerHTML = `
            <div class="msg-header">
                <span>${appt.service} Appointment</span>
                <span class="timestamp">${appt.approvedDate}</span>
            </div>
            <div class="msg-preview">${appt.patientname} â€“ Click to view details</div>
            <div class="msg-details">
                <p><strong>Patient:</strong> ${appt.patientname}</p>
                <p><strong>Date:</strong> ${appt.scheduledDate}</p>
                <p><strong>Time:</strong> ${appt.scheduledTime}</p>
                <p><strong>Notes:</strong> ${appt.scheduleNotes || 'No additional notes'}</p>
            </div>
        `;

        // Toggle details visibility on click
        card.addEventListener('click', () => {
            const details = card.querySelector('.msg-details');
            details.style.display = details.style.display === 'none' ? 'block' : 'none';
        });

        container.appendChild(card);
    });
};
</script>

</body>
</html>
